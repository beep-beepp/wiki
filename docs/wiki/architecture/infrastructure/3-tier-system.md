---
title: "3계층형 시스템"
parent: Infrastructure
grand_parent: Architecture
permalink: /architecture/infrastructure/3-tier-system
nav_order: 2
---

# 3계층 시스템의 구성
3계층 시스템은 웹 서버, AP 서버(애플리케이션 서버), DB 서버로 구성됩니다. 각 서버는 스위치를 통해 연결되어 있으며, 내부적으로 CPU, 메모리, 디스크, NIC/HBA 등의 하드웨어 부품을 가지고 있습니다.
## 주요 개념
프로세스와 스레드는 OS를 이해하는 데 필수적인 개념입니다. 프로세스는 프로그램이 OS상에서 실행되어 독립적인 메모리 공간을 가지고 동작하는 것이고, 스레드는 프로세스 내부에서 메모리 공간을 공유하며 동작합니다. 프로세스는 개별 처리 독립성이 높지만 생성 시 CPU 부하가 높고, 스레드는 생성 시 부하가 낮지만 메모리 공유로 인해 의도하지 않은 데이터 읽기/쓰기가 발생할 수 있습니다.
OS 커널은 운영체제의 심장이자 본질입니다. 커널의 주요 역할은 시스템 콜 인터페이스, 프로세스 관리, 메모리 관리, 네트워크 스택, 파일 시스템 관리, 장치 드라이버 등 여섯 가지로 정리됩니다. 커널 설계 방식에는 모놀리식 커널(Linux, Unix 계열)과 마이크로 커널(Mac OS X)이 있으며, 현재 대부분의 아키텍처는 양쪽의 장점을 취하고 있습니다.

## 웹 데이터 흐름
1. 클라이언트 PC에서 웹 브라우저를 실행하면 먼저 DNS를 통한 이름 해석이 이루어지고, 웹 서버의 httpd 프로세스가 요청을 접수합니다. 웹 서버는 요청이 정적 콘텐츠인지 동적 콘텐츠인지 판단하여, 정적 콘텐츠는 디스크에서 읽어 반환하고, 동적 콘텐츠는 AP 서버에 요청을 전달합니다.
2. AP 서버에서는 JVM(Java Virtual Machine)이 동작하며, 스레드가 요청을 접수합니다. 단순한 계산은 직접 처리하고, 데이터가 필요한 경우 연결 풀을 통해 DB 서버에 질의합니다. 자주 변경되지 않는 정보는 JVM 내부 캐시에 저장하여 성능을 향상시킵니다.
3. DB 서버(예: Oracle DB)는 SQL 요청을 받아 데이터 액세스 방식을 결정합니다. 서버 프로세스가 SQL을 처리하고, LGWR이나 DBWR 같은 백그라운드 프로세스가 메모리와 디스크 간 데이터 동기화를 담당합니다. 공유 메모리(SGA)에는 캐시, SQL 캐시, 테이블, 인덱스 등이 저장되고, 프로세스별 메모리(PGA)에는 소트 영역이나 테이블 결합에 사용하는 영역이 저장됩니다.
4. 대규모 정적 데이터 전송 시에는 CDN(Content Delivery Network)을 이용하기도 합니다. CDN은 전 세계에 데이터 복사본을 배치하고 병렬 기술을 활용해 처리를 효율화합니다.